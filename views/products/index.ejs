<!DOCTYPE html>
 <html>
    <% include ../partials/header %>  <!-- header 불러오기 -->
 <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>장터</title>
    <% include ../partials/scripts %>  <!-- 부트스트랩 코드 불러오기 -->
 </head>
 <body>
  <main class="page contact-page">
    <section class="portfolio-block contact">
     <div class="container">
      <% if (products.length > 0) {%>  <!-- products의 길이가 0 이상일때 / products가 넘어왔을때 -->
      <% products.forEach(product => {%>  <!-- forEach문으로 반복 -->
        <form method="post" action="products/<%= product._id %>?_method=DELETE">  <!-- form 태그로 경로와 전송방식 결정 -->
          <h4>제품명 : <%= product.name %></h4>  <!-- 넘어온 값 출력 -->
          <p>제품가격 : <%= product.price %> 원</p>
          <p>제품수량 : <%= product.quantity %> 개</p>
          <a href="/products/show/<%= product._id %>" class="btn btn-info btn-block  mb-2" style="width: 540px;">자세히보기</a> <!-- 등록된 제품 상세보기 -->
      <% if (user == product.user) {%> <!-- 로그인 한 회원과 제품을 등록한 회원이 같은경우 -->  
          <a href="/products/edit/<%= product._id %>" class="btn btn-secondary btn-block  mb-2" style="width: 540px;">제품정보수정하기</a> <!-- 해당 제품을 등록한 회원만 제품정보를 수정할 수 있게 함 -->  
          <input type="hidden" name="_method" value="DELETE">
          <input type="submit" class="btn btn-danger btn-block" value="제품삭제하기" style="width: 540px;"> <!-- 해당 제품을 등록한 회원만 제품을 삭제할 수 있게 함 -->  
        <br>
      <% }%>
        </form>
      <% }); %>
      <% } else { %>
        <p>제품이 없습니다.</p>
      <% } %>
     </div>
    </section>
  </main>
 </body>
 </html>
